{"lambda-basic-execution": {"policy_content": {"Statement": [{"Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents", "dynamodb:GetItem", "dynamodb:Query", "dynamodb:PutItem", "dynamodb:Batch*", "dynamodb:DeleteItem", "dynamodb:Scan", "cognito-idp:DescribeUserPool", "cognito-idp:GetUser", "cognito-idp:ListUsers", "cognito-idp:AdminCreateUser", "cognito-idp:AdminInitiateAuth", "cognito-idp:GetIdentityProviderByIdentifier", "cognito-idp:ListUserPools", "cognito-idp:ListUserPoolClients", "cognito-idp:AdminRespondToAuthChallenge", "cognito-idp:AdminConfirmSignUp"], "Effect": "Allow", "Resource": "*"}], "Version": "2012-10-17"}, "resource_type": "iam_policy", "allowed_accounts": ["${account_id}"], "tags": {}}, "${booking_userpool}": {"resource_type": "cognito_idp", "password_policy": {"minimum_length": 12, "require_uppercase": true, "require_symbols": true, "require_lowercase": true, "require_numbers": true}, "auto_verified_attributes": [], "sms_configuration": {}, "username_attributes": [], "custom_attributes": [], "tags": {}, "client": {"client_name": "client-app", "generate_secret": false, "explicit_auth_flows": ["ALLOW_ADMIN_USER_PASSWORD_AUTH", "ALLOW_CUSTOM_AUTH", "ALLOW_USER_SRP_AUTH", "ALLOW_REFRESH_TOKEN_AUTH"]}}, "${tables_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "N", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "${reservations_table}": {"resource_type": "dynamodb_table", "hash_key_name": "id", "hash_key_type": "S", "read_capacity": 1, "write_capacity": 1, "global_indexes": [], "autoscaling": [], "tags": {}}, "api-ui-hoster": {"resource_type": "s3_bucket", "acl": "private", "cors": [], "policy": {"Version": "2012-10-17", "Statement": [{"Sid": "WebSiteHostingGetObject", "Effect": "Allow", "Principal": "*", "Action": ["s3:GetObject"], "Resource": ["arn:aws:s3:::api-ui-hoster/*"], "Condition": {"IpAddress": {"aws:SourceIp": ["XXX.XXX.XXX.XXX/32"]}}}]}, "public_access_block": {"block_public_acls": true, "ignore_public_acls": true, "block_public_policy": true, "restrict_public_buckets": true}, "tags": {}, "website_hosting": {"enabled": true, "index_document": "index.html", "error_document": "error.html"}}, "task11_api": {"definition": {"openapi": "3.0.1", "info": {"title": "task11_api", "version": "2025-03-14T01:26:25Z"}, "servers": [{"url": "https://j8kdlkz3j7.execute-api.eu-west-1.amazonaws.com/{basePath}", "variables": {"basePath": {"default": "api"}}}], "paths": {"/reservations": {"get": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "post": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/tables": {"get": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "post": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/signin": {"post": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/tables/{tableId}": {"get": {"parameters": [{"name": "tableId", "in": "path", "required": true, "schema": {"type": "string"}}], "responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "security": [{"authorizer": []}], "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"parameters": [{"name": "tableId", "in": "path", "required": true, "schema": {"type": "string"}}], "responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}, "/signup": {"post": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"httpMethod": "POST", "uri": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:376129861747:function:api_handler/invocations", "responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "passthroughBehavior": "when_no_match", "type": "aws_proxy"}}, "options": {"responses": {"200": {"description": "200 response", "headers": {"Access-Control-Allow-Origin": {"schema": {"type": "string"}}, "Access-Control-Allow-Methods": {"schema": {"type": "string"}}, "Access-Control-Allow-Headers": {"schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Empty"}}}}}, "x-amazon-apigateway-integration": {"responses": {"default": {"statusCode": "200", "responseParameters": {"method.response.header.Access-Control-Allow-Methods": "'*'", "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'", "method.response.header.Access-Control-Allow-Origin": "'*'"}}}, "requestTemplates": {"application/json": "{\"statusCode\": 200}"}, "passthroughBehavior": "when_no_match", "type": "mock"}}}}, "components": {"schemas": {"Empty": {"title": "Empty Schema", "type": "object"}}, "securitySchemes": {"authorizer": {"type": "apiKey", "name": "Authorization", "in": "header", "x-amazon-apigateway-authtype": "cognito_user_pools", "x-amazon-apigateway-authorizer": {"x-syndicate-cognito-userpool-names": ["${booking_userpool}"], "type": "cognito_user_pools"}}}}, "x-syndicate-openapi-tags": {"run_id": "JAP-08", "run_type": "stm", "type": "user", "user_id": "e115d8ed"}}, "resource_type": "api_gateway_oas_v3", "deploy_stage": "api", "tags": {"run_id": "JAP-08", "run_type": "stm", "type": "user", "user_id": "e115d8ed"}}, "api_handler-role": {"predefined_policies": [], "principal_service": "lambda", "custom_policies": ["lambda-basic-execution"], "resource_type": "iam_role", "tags": {}}, "api_handler": {"version": "1.0", "name": "api_handler", "func_name": "handler.lambda_handler", "resource_type": "lambda", "iam_role_name": "api_handler-role", "runtime": "python3.10", "memory": 128, "timeout": 100, "lambda_path": "lambdas/api_handler", "dependencies": [{"resource_name": "${booking_userpool}", "resource_type": "cognito_idp"}], "event_sources": [], "env_variables": {"tables_table": "${tables_table}", "reservations_table": "${reservations_table}", "cup_id": {"resource_name": "${booking_userpool}", "resource_type": "cognito_idp", "parameter": "id"}, "cup_client_id": {"resource_name": "${booking_userpool}", "resource_type": "cognito_idp", "parameter": "client_id"}}, "publish_version": true, "alias": "${lambdas_alias_name}", "url_config": {}, "ephemeral_storage": 512, "logs_expiration": "${logs_expiration}", "tags": {}}, "task12_api_ui": {"name": "task12_api_ui", "resource_type": "swagger_ui", "path_to_spec": "export/j8kdlkz3j7_oas_v3.json", "target_bucket": "api-ui-hoster", "deployment_package": "swagger_ui_task12_api_ui.zip"}}